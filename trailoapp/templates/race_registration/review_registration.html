{% extends 'base.html' %}

{% block title %}Peržiūrėti registraciją{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>Peržiūrėti registraciją</h2>
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="username">Vartotojo vardas:</label>
            <input type="text" class="form-control" id="username" value="{{ registration.user_profile.user.username }}" readonly>
        </div>
        <div class="form-group">
            <label for="stage">Etapas:</label>
            <input type="text" class="form-control" id="stage" value="{{ registration.stage.name }}" readonly>
        </div>
        <div class="form-group">
            <label for="track">Trasa:</label>
            <input type="text" class="form-control" id="track" value="{{ registration.track.name }}" readonly>
        </div>
        <div class="form-group">
            <label for="price">Kaina:</label>
            <input type="text" class="form-control" id="price" value="{{ registration.track.price }}" readonly>
        </div>
        <div class="form-group">
            <label for="registration_date">Registracijos data:</label>
            <input type="text" class="form-control" id="registration_date" value="{{ registration.registration_date }}" readonly>
        </div>
        {% if request.user.is_staff %}
        <div class="form-group">
            <label for="status">Būsena:</label>
            <select class="form-control" id="status" name="status">
                <option value="n" {% if registration.status == 'n' %}selected{% endif %}>Neperžiūrėta</option>
                <option value="p" {% if registration.status == 'p' %}selected{% endif %}>Patvirtinta</option>
                <option value="a" {% if registration.status == 'a' %}selected{% endif %}>Atmesta</option>
            </select>
        </div>
        <div class="form-group">
            <label for="comments">Komentarai:</label>
            <textarea class="form-control" id="comments" name="comments">{{ registration.comments }}</textarea>
        </div>
        <button type="submit" class="btn btn-primary">Išsaugoti</button>
        {% else %}
        <div class="form-group">
            <label for="status">Būsena:</label>
            <input type="text" class="form-control" id="status" value="{% if registration.status == 'n' %}Neperžiūrėta{% elif registration.status == 'p' %}Patvirtinta{% elif registration.status == 'a' %}Atmesta{% endif %}" readonly>
        </div>
        <div class="form-group">
            <label for="comments">Komentarai:</label>
            <textarea class="form-control" id="comments" readonly>{{ registration.comments }}</textarea>
        </div>
        {% endif %}
    </form>
</div>
{% endblock %}
